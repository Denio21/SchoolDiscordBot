const DirectCommand = require("./DirectCommand");
const Discord = require("discord.js");
const Config = require("../Config");

class BakalariCommand extends DirectCommand {

    getName() {
        return "bakalari";
    }

    getGroup() {
        return "main";
    }

    getRoles() {
        return ["member"];
    }
    
    getDependencies() {
        return ["directbakalarimodule"];
    }

    init(bot) {
        this.client = bot.client;
        this.directBakalariModule = bot.modules["directbakalarimodule"];
    }

    async call(args, message) {
        const channel = message.channel;

        if(args.length == 0) {
            this.sendHelp(channel);
            return;
        }

        const rssToken = args[0];

        await this.directBakalariModule.addRssTokenForUser(message.author.id, rssToken);

        const embed = new Discord.RichEmbed()
            .setTitle("游닊 | RSS token zm캩n캩n.")
            .setDescription("RSS token byl zm캩n캩n. B캩hem p치r minut dostanete upozorn캩n칤 o zn치mk치ch. Poku캞 se tak nestane do hodiny a bot je online, nejsp칤코e jste zadali 코patn칳 token - proto jej zadejte znovu a spr치vn캩 (v코e za ?bk=).")
            .setColor(Config.getColor("SUCCESS"));

        channel.send(embed);
    }

}

module.exports = BakalariCommand;